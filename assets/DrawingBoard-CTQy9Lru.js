import{Q as le}from"./QBtn-CVP2G80N.js";import{Q as De}from"./QCheckbox-Lswftof0.js";import{Q as Fe}from"./QSelect-BpMYOcjP.js";import{u as Pe,a as Ie,b as ze}from"./use-key-composition-BXeVTENM.js";import{T as Ae}from"./TouchPan-CXDd8akn.js";import{u as Ee,a as Qe}from"./use-dark-BkGNqrXl.js";import{b as B}from"./format-hlGAdIUH.js";import{g as oe,r as p,a as t,o as We,Q as Ue,R as je,S as j,h as b,c as Xe,w as He,s as Ke,x as Oe,e as Ye,B as Ge,C as Je,D as Ze,G as P,E as R,U as ne,_ as ea}from"./index-m_G7EGje.js";import{b as aa}from"./render-CmTqwg_I.js";import{Q as ta}from"./QPage-BL-E_7of.js";import"./QItem-D4r14YIk.js";import"./use-prevent-scroll-DfhLeO15.js";import"./focus-manager-BJWzFvJg.js";const re="q-slider__marker-labels",la=r=>({value:r}),na=({marker:r})=>b("div",{key:r.value,style:r.style,class:r.classes},r.label),ue=[34,37,40,33,39,38],ra={...Ee,...Pe,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:r=>r>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},oa=["pan","update:modelValue","change"];function ua({updateValue:r,updatePosition:o,getDragging:u,formAttrs:s}){const{props:e,emit:y,slots:k,proxy:{$q:m}}=oe(),T=Qe(e,m),L=Ie(s),C=p(!1),M=p(!1),h=p(!1),$=p(!1),g=t(()=>e.vertical===!0?"--v":"--h"),q=t(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),S=t(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(m.lang.rtl===!0)),x=t(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),i=t(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),l=t(()=>e.disable!==!0&&e.readonly!==!0&&x.value<i.value),c=t(()=>{if(e.step===0)return n=>n;const a=(String(e.step).trim().split(".")[1]||"").length;return n=>parseFloat(n.toFixed(a))}),w=t(()=>e.step===0?1:e.step),I=t(()=>l.value===!0?e.tabindex||0:-1),V=t(()=>e.max-e.min),X=t(()=>i.value-x.value),N=t(()=>A(x.value)),z=t(()=>A(i.value)),D=t(()=>e.vertical===!0?S.value===!0?"bottom":"top":S.value===!0?"right":"left"),H=t(()=>e.vertical===!0?"height":"width"),se=t(()=>e.vertical===!0?"width":"height"),K=t(()=>e.vertical===!0?"vertical":"horizontal"),ie=t(()=>{const a={role:"slider","aria-valuemin":x.value,"aria-valuemax":i.value,"aria-orientation":K.value,"data-step":e.step};return e.disable===!0?a["aria-disabled"]="true":e.readonly===!0&&(a["aria-readonly"]="true"),a}),ce=t(()=>`q-slider q-slider${g.value} q-slider--${C.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(l.value===!0?" q-slider--editable":""))+(h.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(T.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+g.value:""));function F(a){const n="q-slider__"+a;return`${n} ${n}${g.value} ${n}${g.value}${q.value}`}function O(a){const n="q-slider__"+a;return`${n} ${n}${g.value}`}const ve=t(()=>{const a=e.selectionColor||e.color;return"q-slider__selection absolute"+(a!==void 0?` text-${a}`:"")}),de=t(()=>O("markers")+" absolute overflow-hidden"),me=t(()=>O("track-container")),fe=t(()=>F("pin")),be=t(()=>F("label")),pe=t(()=>F("text-container")),he=t(()=>F("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),ge=t(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),ke=t(()=>{const a={[se.value]:e.trackSize};return e.trackImg!==void 0&&(a.backgroundImage=`url(${e.trackImg}) !important`),a}),Ce=t(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Y=t(()=>{const a=z.value-N.value,n={[D.value]:`${100*N.value}%`,[H.value]:a===0?"2px":`${100*a}%`};return e.innerTrackImg!==void 0&&(n.backgroundImage=`url(${e.innerTrackImg}) !important`),n});function xe(a){const{min:n,max:v,step:d}=e;let f=n+a*(v-n);if(d>0){const _=(f-x.value)%d;f+=(Math.abs(_)>=d/2?(_<0?-1:1)*d:0)-_}return f=c.value(f),B(f,x.value,i.value)}function A(a){return V.value===0?0:(a-e.min)/V.value}function ye(a,n){const v=Ue(a),d=e.vertical===!0?B((v.top-n.top)/n.height,0,1):B((v.left-n.left)/n.width,0,1);return B(S.value===!0?1-d:d,N.value,z.value)}const G=t(()=>je(e.markers)===!0?e.markers:w.value),J=t(()=>{const a=[],n=G.value,v=e.max;let d=e.min;do a.push(d),d+=n;while(d<v);return a.push(v),a}),Z=t(()=>{const a=` ${re}${g.value}-`;return re+`${a}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${a}${S.value===!0?"rtl":"ltr"}`}),E=t(()=>e.markerLabels===!1?null:we(e.markerLabels).map((a,n)=>({index:n,value:a.value,label:a.label||a.value,classes:Z.value+(a.classes!==void 0?" "+a.classes:""),style:{...ae(a.value),...a.style||{}}}))),ee=t(()=>({markerList:E.value,markerMap:Me.value,classes:Z.value,getStyle:ae})),Se=t(()=>{const a=X.value===0?"2px":100*G.value/X.value;return{...Y.value,backgroundSize:e.vertical===!0?`2px ${a}%`:`${a}% 2px`}});function we(a){if(a===!1)return null;if(a===!0)return J.value.map(la);if(typeof a=="function")return J.value.map(v=>{const d=a(v);return j(d)===!0?{...d,value:v}:{value:v,label:d}});const n=({value:v})=>v>=e.min&&v<=e.max;return Array.isArray(a)===!0?a.map(v=>j(v)===!0?v:{value:v}).filter(n):Object.keys(a).map(v=>{const d=a[v],f=Number(v);return j(d)===!0?{...d,value:f}:{value:f,label:d}}).filter(n)}function ae(a){return{[D.value]:`${100*(a-e.min)/V.value}%`}}const Me=t(()=>{if(e.markerLabels===!1)return null;const a={};return E.value.forEach(n=>{a[n.value]=n}),a});function $e(){if(k["marker-label-group"]!==void 0)return k["marker-label-group"](ee.value);const a=k["marker-label"]||na;return E.value.map(n=>a({marker:n,...ee.value}))}const _e=t(()=>[[Ae,Te,void 0,{[K.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Te(a){a.isFinal===!0?($.value!==void 0&&(o(a.evt),a.touch===!0&&r(!0),$.value=void 0,y("pan","end")),C.value=!1,h.value=!1):a.isFirst===!0?($.value=u(a.evt),o(a.evt),r(),C.value=!0,y("pan","start")):(o(a.evt),r())}function te(){h.value=!1}function qe(a){o(a,u(a)),r(),M.value=!0,C.value=!0,document.addEventListener("mouseup",Q,!0)}function Q(){M.value=!1,C.value=!1,r(!0),te(),document.removeEventListener("mouseup",Q,!0)}function Be(a){o(a,u(a)),r(!0)}function Le(a){ue.includes(a.keyCode)&&r(!0)}function Re(a){if(e.vertical===!0)return null;const n=m.lang.rtl!==e.reverse?1-a:a;return{transform:`translateX(calc(${2*n-1} * ${e.thumbSize} / 2 + ${50-100*n}%))`}}function Ve(a){const n=t(()=>M.value===!1&&(h.value===a.focusValue||h.value==="both")?" q-slider--focus":""),v=t(()=>`q-slider__thumb q-slider__thumb${g.value} q-slider__thumb${g.value}-${S.value===!0?"rtl":"ltr"} absolute non-selectable`+n.value+(a.thumbColor.value!==void 0?` text-${a.thumbColor.value}`:"")),d=t(()=>({width:e.thumbSize,height:e.thumbSize,[D.value]:`${100*a.ratio.value}%`,zIndex:h.value===a.focusValue?2:void 0})),f=t(()=>a.labelColor.value!==void 0?` text-${a.labelColor.value}`:""),_=t(()=>Re(a.ratio.value)),W=t(()=>"q-slider__text"+(a.labelTextColor.value!==void 0?` text-${a.labelTextColor.value}`:""));return()=>{const U=[b("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[b("path",{d:e.thumbPath})]),b("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(U.push(b("div",{class:fe.value+" absolute fit no-pointer-events"+f.value},[b("div",{class:be.value,style:{minWidth:e.thumbSize}},[b("div",{class:pe.value,style:_.value},[b("span",{class:W.value},a.label.value)])])])),e.name!==void 0&&e.disable!==!0&&L(U,"push")),b("div",{class:v.value,style:d.value,...a.getNodeData()},U)}}function Ne(a,n,v,d){const f=[];e.innerTrackColor!=="transparent"&&f.push(b("div",{key:"inner",class:Ce.value,style:Y.value})),e.selectionColor!=="transparent"&&f.push(b("div",{key:"selection",class:ve.value,style:a.value})),e.markers!==!1&&f.push(b("div",{key:"marker",class:de.value,style:Se.value})),d(f);const _=[aa("div",{key:"trackC",class:me.value,tabindex:n.value,...v.value},[b("div",{class:ge.value,style:ke.value},f)],"slide",l.value,()=>_e.value)];if(e.markerLabels!==!1){const W=e.switchMarkerLabelsSide===!0?"unshift":"push";_[W](b("div",{key:"markerL",class:he.value},$e()))}return _}return We(()=>{document.removeEventListener("mouseup",Q,!0)}),{state:{active:C,focus:h,preventFocus:M,dragging:$,editable:l,classes:ce,tabindex:I,attributes:ie,roundValueFn:c,keyStep:w,trackLen:V,innerMin:x,innerMinRatio:N,innerMax:i,innerMaxRatio:z,positionProp:D,sizeProp:H,isReversed:S},methods:{onActivate:qe,onMobileClick:Be,onBlur:te,onKeyup:Le,getContent:Ne,getThumbRenderFn:Ve,convertRatioToModel:xe,convertModelToRatio:A,getDraggingRatio:ye}}}const sa=()=>({}),ia=Xe({name:"QSlider",props:{...ra,modelValue:{required:!0,default:null,validator:r=>typeof r=="number"||r===null},labelValue:[String,Number]},emits:oa,setup(r,{emit:o}){const{proxy:{$q:u}}=oe(),{state:s,methods:e}=ua({updateValue:g,updatePosition:S,getDragging:q,formAttrs:ze(r)}),y=p(null),k=p(0),m=p(0);function T(){m.value=r.modelValue===null?s.innerMin.value:B(r.modelValue,s.innerMin.value,s.innerMax.value)}He(()=>`${r.modelValue}|${s.innerMin.value}|${s.innerMax.value}`,T),T();const L=t(()=>e.convertModelToRatio(m.value)),C=t(()=>s.active.value===!0?k.value:L.value),M=t(()=>{const l={[s.positionProp.value]:`${100*s.innerMinRatio.value}%`,[s.sizeProp.value]:`${100*(C.value-s.innerMinRatio.value)}%`};return r.selectionImg!==void 0&&(l.backgroundImage=`url(${r.selectionImg}) !important`),l}),h=e.getThumbRenderFn({focusValue:!0,getNodeData:sa,ratio:C,label:t(()=>r.labelValue!==void 0?r.labelValue:m.value),thumbColor:t(()=>r.thumbColor||r.color),labelColor:t(()=>r.labelColor),labelTextColor:t(()=>r.labelTextColor)}),$=t(()=>s.editable.value!==!0?{}:u.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:x,onBlur:e.onBlur,onKeydown:i,onKeyup:e.onKeyup});function g(l){m.value!==r.modelValue&&o("update:modelValue",m.value),l===!0&&o("change",m.value)}function q(){return y.value.getBoundingClientRect()}function S(l,c=s.dragging.value){const w=e.getDraggingRatio(l,c);m.value=e.convertRatioToModel(w),k.value=r.snap!==!0||r.step===0?w:e.convertModelToRatio(m.value)}function x(){s.focus.value=!0}function i(l){if(ue.includes(l.keyCode)===!1)return;Ke(l);const c=([34,33].includes(l.keyCode)?10:1)*s.keyStep.value,w=([34,37,40].includes(l.keyCode)?-1:1)*(s.isReversed.value===!0?-1:1)*(r.vertical===!0?-1:1)*c;m.value=B(s.roundValueFn.value(m.value+w),s.innerMin.value,s.innerMax.value),g()}return()=>{const l=e.getContent(M,s.tabindex,$,c=>{c.push(h())});return b("div",{ref:y,class:s.classes.value+(r.modelValue===null?" q-slider--no-value":""),...s.attributes.value,"aria-valuenow":r.modelValue},l)}}}),ca={class:"row q-gutter-md items-center q-mb-md"},va={class:"canvas-container"},da={class:"row q-gutter-md items-center q-mt-md"},ma=Oe({__name:"DrawingBoard",setup(r){const o=p(null),u=p(null),s=p(!1),e=p("black"),y=p(3),k=p(!1),m=p(0),T=p(0),L=[{label:"Noir",value:"black"},{label:"Rouge",value:"red"},{label:"Vert",value:"green"},{label:"Bleu",value:"blue"},{label:"Orange",value:"orange"}];function C(i){if(!u.value||!o.value)return;const l=i.offsetX*o.value.width/o.value.clientWidth,c=i.offsetY*o.value.height/o.value.clientHeight;m.value=l,T.value=c,s.value=!0,u.value.beginPath(),u.value.moveTo(l,c)}function M(i){if(!s.value||!u.value||!o.value)return;const l=i.offsetX*o.value.width/o.value.clientWidth,c=i.offsetY*o.value.height/o.value.clientHeight;u.value.lineWidth=y.value,u.value.strokeStyle=k.value?"white":e.value,u.value.lineCap="round",u.value.lineTo(l,c),u.value.stroke()}function h(){u.value&&(s.value=!1,u.value.closePath())}function $(){u.value&&o.value&&u.value.clearRect(0,0,o.value.width,o.value.height)}function g(){if(!o.value)return;const i=o.value.toDataURL("image/png"),l=document.createElement("a");l.href=i,l.download="dessin.png",l.click()}function q(i){if(!o.value||!i.touches.length)return{x:0,y:0};const l=o.value.getBoundingClientRect(),c=i.touches[0],w=(c.clientX-l.left)*o.value.width/o.value.clientWidth,I=(c.clientY-l.top)*o.value.height/o.value.clientHeight;return{x:w,y:I}}function S(i){if(!u.value||!o.value)return;const{x:l,y:c}=q(i);m.value=l,T.value=c,s.value=!0,u.value.beginPath(),u.value.moveTo(l,c)}function x(i){if(!s.value||!u.value||!o.value)return;const{x:l,y:c}=q(i);u.value.lineWidth=y.value,u.value.strokeStyle=k.value?"white":e.value,u.value.lineCap="round",u.value.lineTo(l,c),u.value.stroke()}return Ye(()=>{if(o.value){o.value.width=o.value.offsetWidth*2,o.value.height=o.value.offsetHeight*2;const i=o.value.getContext("2d");i&&(u.value=i)}}),(i,l)=>(Ze(),Ge(ta,{class:"q-pa-md"},{default:Je(()=>[P("div",ca,[R(le,{label:"Effacer",color:"negative",onClick:$}),R(le,{label:"Exporter en PNG",color:"primary",onClick:g})]),P("div",va,[P("canvas",{ref_key:"canvas",ref:o,class:"drawing-canvas",onMousedown:C,onMousemove:M,onMouseup:h,onMouseleave:h,onTouchstart:ne(S,["prevent"]),onTouchmove:ne(x,["prevent"]),onTouchend:h},null,544)]),P("div",da,[R(De,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=c=>k.value=c),label:"Gomme"},null,8,["modelValue"]),R(Fe,{modelValue:e.value,"onUpdate:modelValue":l[1]||(l[1]=c=>e.value=c),options:L,label:"Couleur",dense:"",outlined:"","emit-value":"","map-options":"",class:"col"},null,8,["modelValue"]),R(ia,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=c=>y.value=c),min:1,max:20,"label-always":!0,class:"col"},null,8,["modelValue"])])]),_:1}))}}),_a=ea(ma,[["__scopeId","data-v-4aad821d"]]);export{_a as default};
