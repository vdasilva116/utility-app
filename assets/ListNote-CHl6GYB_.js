import{Q}from"./QInput-7YtwZLaz.js";import{Q as N,a as g}from"./QBtn-B5HOvfy_.js";import{Q as h,a as m}from"./QItem-Dk3vNoqN.js";import{Q as k}from"./QList-DI1EW8e7.js";import{Q as w}from"./QPage-DiLNYGvv.js";import{x as y,r as f,e as b,B as p,C as s,y as n,D as l,G as x,E as o,K as B,M as C,N as V,O as I,A as L,H as q,L as K,_ as T}from"./index-mX4mPh-6.js";import"./use-key-composition-hvQkky4D.js";import"./use-dark-DzcR0PhV.js";import"./render-BPtvFS0_.js";import"./focus-manager-BJWzFvJg.js";const U={class:"row items-end q-gutter-sm q-mb-md"},$=y({__name:"ListNote",setup(A){const i=f([]),r=f(""),u=L();function _(t){u.push(`/note/${t}`)}async function v(){const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:a,error:e}=await n.from("notes").select("*").eq("user_id",t.id).order("id",{ascending:!1});!e&&a&&(i.value=a)}async function d(){const t=r.value.trim();if(!t)return;const{data:{user:a}}=await n.auth.getUser();if(!a)return;const{data:e,error:c}=await n.from("notes").insert([{user_id:a.id,title:t,content:""}]).select().single();!c&&e&&(i.value.unshift(e),r.value="",u.push(`/note/${e.id}`))}return b(()=>{v()}),(t,a)=>(l(),p(w,{class:"q-pa-md"},{default:s(()=>[x("div",U,[o(Q,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),label:"Titre de la note",outlined:"",class:"col",dense:"",onKeyup:B(d,["enter"])},null,8,["modelValue"]),o(N,{label:"Ajouter",color:"primary",onClick:d})]),o(k,{bordered:"",separator:""},{default:s(()=>[(l(!0),C(I,null,V(i.value,e=>(l(),p(h,{key:e.id,clickable:"",onClick:c=>_(e.id)},{default:s(()=>[o(m,null,{default:s(()=>[q(K(e.title||"(Note sans titre)"),1)]),_:2},1024),o(m,{side:""},{default:s(()=>[o(g,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))}}),R=T($,[["__scopeId","data-v-0c248673"]]);export{R as default};
