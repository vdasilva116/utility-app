import{Q}from"./QInput-B7YCRa1i.js";import{a as N,Q as g}from"./QBtn-DW49BdE9.js";import{Q as h,a as m}from"./QItem-ImSksY7L.js";import{Q as k}from"./QList-Dn61JfwO.js";import{Q as w}from"./QPage-4aB-4sV1.js";import{t as y,r as f,o as b,y as p,z as s,u as n,A as l,D as x,B as o,H as B,J as I,K as V,L as C,x as L,E as q,I as K,_ as T}from"./index-BwSv7cGb.js";import"./use-key-composition-D-iEXPE9.js";import"./use-dark-CUTMrp-q.js";import"./render-DxpCd_na.js";import"./focus-manager-BJWzFvJg.js";const U={class:"row items-end q-gutter-sm q-mb-md"},$=y({__name:"ListNote",setup(A){const i=f([]),r=f(""),u=L();function _(t){u.push(`/note/${t}`)}async function v(){const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:a,error:e}=await n.from("notes").select("*").eq("user_id",t.id).order("id",{ascending:!1});!e&&a&&(i.value=a)}async function d(){const t=r.value.trim();if(!t)return;const{data:{user:a}}=await n.auth.getUser();if(!a)return;const{data:e,error:c}=await n.from("notes").insert([{user_id:a.id,title:t,content:""}]).select().single();!c&&e&&(i.value.unshift(e),r.value="",u.push(`/note/${e.id}`))}return b(()=>{v()}),(t,a)=>(l(),p(w,{class:"q-pa-md"},{default:s(()=>[x("div",U,[o(Q,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),label:"Titre de la note",outlined:"",class:"col",dense:"",onKeyup:B(d,["enter"])},null,8,["modelValue"]),o(N,{label:"Ajouter",color:"primary",onClick:d})]),o(k,{bordered:"",separator:""},{default:s(()=>[(l(!0),I(C,null,V(i.value,e=>(l(),p(h,{key:e.id,clickable:"",onClick:c=>_(e.id)},{default:s(()=>[o(m,null,{default:s(()=>[q(K(e.title||"(Note sans titre)"),1)]),_:2},1024),o(m,{side:""},{default:s(()=>[o(g,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))}}),R=T($,[["__scopeId","data-v-0c248673"]]);export{R as default};
