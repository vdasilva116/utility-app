import{Q as k}from"./QBtn-DsvvR9OZ.js";import{Q as R}from"./QInput-DrdT4DZF.js";import{Q as J,a as I}from"./QItem-C7m-ZyoV.js";import{Q as O}from"./QList-hjHv5Mac.js";import{Q as E}from"./QPage-bXdzJylz.js";import{t as T,r as v,o as j,u as V,v as p,x as m,G as i,F as h,O as D,y as c,H as x,J as A,I as C,B as Q,_ as F}from"./index-Bav5nf7W.js";import"./dom-DD5FS-_1.js";import"./render-BnZkIQOO.js";import"./use-key-composition-BXqQiCfi.js";import"./use-dark-JgITWQMA.js";const P={class:"column items-center col-8"},U={class:"row items-center justify-between full-width q-mb-sm"},z={class:"text-caption q-mb-md"},H={class:"q-mb-md"},K={class:"grid-container"},W={key:0,class:"q-mt-md text-negative"},X={class:"col-4 q-ml-md"},a=4,Y=T({__name:"2048Game",setup(Z){const l=v(Array(a*a).fill(0)),g=v(0),d=v(""),_=v(!1),n=v([]);function u(r,e){return e*a+r}function b(){const r=l.value.map((t,o)=>t===0?o:-1).filter(t=>t!==-1);if(r.length===0)return;const e=r[Math.floor(Math.random()*r.length)];l.value[e]=Math.random()<.9?2:4}function w(r){const e=r.filter(t=>t!==void 0&&t!==0);for(let t=0;t<e.length-1;t++)if(e[t]!==void 0&&e[t+1]!==void 0&&e[t]===e[t+1]){const o=e[t]*2;e[t]=o,g.value+=o,e.splice(t+1,1)}return[...e,...Array(a-e.length).fill(0)]}function M(r){let e=!1;const t=[...l.value];for(let o=0;o<a;o++){const f=[];for(let s=0;s<a;s++){const y=r==="left"||r==="right"?u(s,o):u(o,s);f.push(l.value[y])}const G=r==="left"?w(f):r==="right"?w(f.reverse()).reverse():r==="up"?w(f):w(f.reverse()).reverse();for(let s=0;s<a;s++){const y=G[s],q=r==="left"||r==="right"?u(s,o):u(o,s);l.value[q]!==y&&(t[q]=y,e=!0)}}e&&(l.value=t,b(),!l.value.includes(0)&&!N()&&(_.value=!0))}function N(){for(let r=0;r<a;r++)for(let e=0;e<a;e++){const t=l.value[u(e,r)];if(e<a-1&&t===l.value[u(e+1,r)]||r<a-1&&t===l.value[u(e,r+1)])return!0}return!1}function S(){l.value=Array(a*a).fill(0),g.value=0,_.value=!1,d.value="",b(),b()}function B(){d.value.trim()&&(n.value.push({name:d.value.trim(),score:g.value}),n.value.sort((r,e)=>e.score-r.score),n.value=n.value.slice(0,5),localStorage.setItem("game2048Scores",JSON.stringify(n.value)),S())}function L(){n.value=[],localStorage.removeItem("game2048Scores")}return j(()=>{const r=localStorage.getItem("game2048Scores");r&&(n.value=JSON.parse(r)),S(),window.addEventListener("keydown",e=>{_.value||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&M(e.key.replace("Arrow","").toLowerCase())})}),(r,e)=>(m(),V(E,{class:"q-pa-md row justify-center"},{default:p(()=>[i("div",P,[i("div",U,[e[1]||(e[1]=i("div",{class:"text-h5"},"🧩 Jeu 2048",-1)),c(k,{label:"Relancer",color:"secondary",onClick:S})]),i("div",z,"Score : "+x(g.value),1),i("div",H,[i("div",K,[(m(!0),h(C,null,A(l.value,(t,o)=>(m(),h("div",{key:o,class:"tile"},x(t||""),1))),128))])]),_.value?(m(),h("div",W,[e[2]||(e[2]=Q(" 💀 Partie terminée ! ")),c(R,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),label:"Ton nom",class:"q-mt-md",outlined:"",dense:""},null,8,["modelValue"]),c(k,{label:"Enregistrer le score",color:"primary",class:"q-mt-sm",onClick:B})])):D("",!0)]),i("div",X,[e[3]||(e[3]=i("div",{class:"text-h6"},"🏆 Meilleurs scores",-1)),c(O,{bordered:"",separator:"",class:"q-mt-sm"},{default:p(()=>[(m(!0),h(C,null,A(n.value,(t,o)=>(m(),V(J,{key:o},{default:p(()=>[c(I,null,{default:p(()=>[Q(x(t.name),1)]),_:2},1024),c(I,null,{default:p(()=>[Q(x(t.score),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),c(k,{flat:"",label:"Reset scores",color:"negative",class:"q-mt-sm",onClick:L})])]),_:1}))}}),ue=F(Y,[["__scopeId","data-v-db8b1f65"]]);export{ue as default};
