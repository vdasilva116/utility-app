import{a as y}from"./QBtn-BDQnvuLR.js";import{Q as S}from"./QInput-6zwGuRe8.js";import{Q as j,a as x}from"./QItem-COl9wtFJ.js";import{Q as A}from"./QList-CMXfLprC.js";import{Q as F}from"./QPage-YA5Fo4QJ.js";import{t as J,r as l,a as R,o as U,b as z,y as g,z as m,u as w,A as v,D as r,J as C,C as K,B as n,I as u,K as T,L as E,E as k,_ as P}from"./index-CAgil_vY.js";import"./render-DGraGvcx.js";import"./use-key-composition-DDjLvV_6.js";import"./use-dark-Crx3VTFI.js";import"./focus-manager-BJWzFvJg.js";const $={class:"column items-center col-8"},H={class:"row items-center justify-between full-width q-mb-sm"},O={class:"text-caption q-mb-md"},W={class:"row q-gutter-sm",style:{"max-width":"400px"}},X={class:"text-h4"},Y={key:0,class:"q-mt-lg text-positive"},Z={class:"col-4 q-ml-md"},ee=J({__name:"MemoriesGame",setup(ae){const q=["ðŸ¶","ðŸ±","ðŸ¦Š","ðŸ»","ðŸ¼","ðŸ¸","ðŸµ","ðŸ”","ðŸ·","ðŸ®","ðŸ¯","ðŸ¦"],d=l([]),c=l([]),s=l([]),_=l(0),I=l(0),f=l(0),i=l(null),h=l(!1),p=l(""),b=l([]),Q=R(()=>c.value.every(e=>e));function L(){return[...q,...q].sort(()=>.5-Math.random())}function B(){d.value=L(),c.value=Array(d.value.length).fill(!1),s.value=[],_.value=0,f.value=0,h.value=!1,I.value=Date.now(),i.value&&clearInterval(i.value),i.value=setInterval(()=>{f.value=Math.floor((Date.now()-I.value)/1e3)},1e3)}function N(e){if(!(s.value.length>=2||s.value.includes(e))){if(s.value.push(e),s.value.length===2){_.value++;const[a,t]=s.value;a!==void 0&&t!==void 0&&d.value[a]===d.value[t]?(c.value[a]=!0,c.value[t]=!0,s.value=[]):setTimeout(()=>{s.value=[]},800)}Q.value&&!h.value&&(h.value=!0,clearInterval(i.value))}}function M(){p.value="",B()}async function D(){if(!p.value.trim())return;const{error:e}=await w.from("scores_memory").insert({name:p.value.trim(),moves:_.value,time:f.value});e&&console.error("Erreur enregistrement score memory",e),await V(),M()}async function G(){const{error:e}=await w.from("scores_memory").delete().neq("id","");e&&console.error("Erreur suppression scores memory",e),b.value=[]}async function V(){const{data:e,error:a}=await w.from("scores_memory").select("*").order("moves",{ascending:!0}).order("time",{ascending:!0}).limit(5);!a&&e&&(b.value=e)}return U(()=>{B(),V()}),z(()=>{i.value&&clearInterval(i.value)}),(e,a)=>(v(),g(F,{class:"q-pa-md row justify-center"},{default:m(()=>[r("div",$,[r("div",H,[a[1]||(a[1]=r("div",{class:"text-h5"},"ðŸ§  Jeu de Memory",-1)),n(y,{label:"Relancer",color:"secondary",onClick:M})]),r("div",O,"Temps : "+u(f.value)+"s",1),r("div",W,[(v(!0),C(E,null,T(d.value,(t,o)=>(v(),g(y,{key:o,class:"memory-card",onClick:te=>N(o),disable:c.value[o]||s.value.includes(o)},{default:m(()=>[r("span",X,u(c.value[o]||s.value.includes(o)?t:"â“"),1)]),_:2},1032,["onClick","disable"]))),128))]),Q.value?(v(),C("div",Y,[k(" ðŸŽ‰ Bravo ! Tu as tout trouvÃ© en "+u(_.value)+" coups et "+u(f.value)+"s ! ",1),n(S,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=t=>p.value=t),label:"Ton nom",class:"q-mt-md",outlined:"",dense:""},null,8,["modelValue"]),n(y,{label:"Enregistrer",color:"primary",class:"q-mt-sm",onClick:D})])):K("",!0)]),r("div",Z,[a[2]||(a[2]=r("div",{class:"text-h6"},"ðŸ† Meilleurs scores",-1)),n(A,{bordered:"",separator:"",class:"q-mt-sm"},{default:m(()=>[(v(!0),C(E,null,T(b.value,(t,o)=>(v(),g(j,{key:o},{default:m(()=>[n(x,null,{default:m(()=>[k(u(t.name),1)]),_:2},1024),n(x,null,{default:m(()=>[k(u(t.moves)+" coups - "+u(t.time)+"s",1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),n(y,{flat:"",label:"Reset scores",color:"negative",class:"q-mt-sm",onClick:G})])]),_:1}))}}),de=P(ee,[["__scopeId","data-v-054c197f"]]);export{de as default};
