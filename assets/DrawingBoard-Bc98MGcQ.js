import{Q as te}from"./QBtn-DKLCg6f7.js";import{Q as Ne}from"./QCheckbox-Cv5G7E9f.js";import{Q as Fe}from"./QSelect-EI6WGw-B.js";import{u as De,a as Ie,b as Pe}from"./use-key-composition-Cf6ffK-U.js";import{T as ze}from"./TouchPan-Dr8XhaxL.js";import{u as Ae,a as Qe}from"./use-dark-BnlytlHe.js";import{f as L}from"./format-45Gh4lPq.js";import{g as re,r as k,a as t,b as Ee,P as Ue,Q as We,R as W,h as p,c as je,w as Ke,M as Oe,t as Xe,o as Ge,u as He,v as Ye,x as Je,G as I,y as V,_ as Ze}from"./index-De15wrRx.js";import{b as ea}from"./render-0Abd-KGh.js";import{Q as aa}from"./QPage-Cyj_wye0.js";import"./dom-CWUWeCtZ.js";import"./QItem-DyI16qkB.js";const le="q-slider__marker-labels",ta=r=>({value:r}),la=({marker:r})=>p("div",{key:r.value,style:r.style,class:r.classes},r.label),ne=[34,37,40,33,39,38],ra={...Ae,...De,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:r=>r>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},na=["pan","update:modelValue","change"];function oa({updateValue:r,updatePosition:n,getDragging:c,formAttrs:o}){const{props:e,emit:y,slots:x,proxy:{$q:m}}=re(),B=Qe(e,m),T=Ie(o),C=k(!1),S=k(!1),h=k(!1),M=k(!1),g=t(()=>e.vertical===!0?"--v":"--h"),b=t(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),u=t(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(m.lang.rtl===!0)),v=t(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),$=t(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),d=t(()=>e.disable!==!0&&e.readonly!==!0&&v.value<$.value),w=t(()=>{if(e.step===0)return l=>l;const a=(String(e.step).trim().split(".")[1]||"").length;return l=>parseFloat(l.toFixed(a))}),q=t(()=>e.step===0?1:e.step),oe=t(()=>d.value===!0?e.tabindex||0:-1),R=t(()=>e.max-e.min),j=t(()=>$.value-v.value),N=t(()=>z(v.value)),P=t(()=>z($.value)),F=t(()=>e.vertical===!0?u.value===!0?"bottom":"top":u.value===!0?"right":"left"),K=t(()=>e.vertical===!0?"height":"width"),se=t(()=>e.vertical===!0?"width":"height"),O=t(()=>e.vertical===!0?"vertical":"horizontal"),ue=t(()=>{const a={role:"slider","aria-valuemin":v.value,"aria-valuemax":$.value,"aria-orientation":O.value,"data-step":e.step};return e.disable===!0?a["aria-disabled"]="true":e.readonly===!0&&(a["aria-readonly"]="true"),a}),ie=t(()=>`q-slider q-slider${g.value} q-slider--${C.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(d.value===!0?" q-slider--editable":""))+(h.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(B.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+g.value:""));function D(a){const l="q-slider__"+a;return`${l} ${l}${g.value} ${l}${g.value}${b.value}`}function X(a){const l="q-slider__"+a;return`${l} ${l}${g.value}`}const ce=t(()=>{const a=e.selectionColor||e.color;return"q-slider__selection absolute"+(a!==void 0?` text-${a}`:"")}),ve=t(()=>X("markers")+" absolute overflow-hidden"),de=t(()=>X("track-container")),me=t(()=>D("pin")),fe=t(()=>D("label")),be=t(()=>D("text-container")),pe=t(()=>D("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),ke=t(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),ge=t(()=>{const a={[se.value]:e.trackSize};return e.trackImg!==void 0&&(a.backgroundImage=`url(${e.trackImg}) !important`),a}),he=t(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),G=t(()=>{const a=P.value-N.value,l={[F.value]:`${100*N.value}%`,[K.value]:a===0?"2px":`${100*a}%`};return e.innerTrackImg!==void 0&&(l.backgroundImage=`url(${e.innerTrackImg}) !important`),l});function Ce(a){const{min:l,max:s,step:i}=e;let f=l+a*(s-l);if(i>0){const _=(f-v.value)%i;f+=(Math.abs(_)>=i/2?(_<0?-1:1)*i:0)-_}return f=w.value(f),L(f,v.value,$.value)}function z(a){return R.value===0?0:(a-e.min)/R.value}function xe(a,l){const s=Ue(a),i=e.vertical===!0?L((s.top-l.top)/l.height,0,1):L((s.left-l.left)/l.width,0,1);return L(u.value===!0?1-i:i,N.value,P.value)}const H=t(()=>We(e.markers)===!0?e.markers:q.value),Y=t(()=>{const a=[],l=H.value,s=e.max;let i=e.min;do a.push(i),i+=l;while(i<s);return a.push(s),a}),J=t(()=>{const a=` ${le}${g.value}-`;return le+`${a}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${a}${u.value===!0?"rtl":"ltr"}`}),A=t(()=>e.markerLabels===!1?null:Se(e.markerLabels).map((a,l)=>({index:l,value:a.value,label:a.label||a.value,classes:J.value+(a.classes!==void 0?" "+a.classes:""),style:{...ee(a.value),...a.style||{}}}))),Z=t(()=>({markerList:A.value,markerMap:Me.value,classes:J.value,getStyle:ee})),ye=t(()=>{const a=j.value===0?"2px":100*H.value/j.value;return{...G.value,backgroundSize:e.vertical===!0?`2px ${a}%`:`${a}% 2px`}});function Se(a){if(a===!1)return null;if(a===!0)return Y.value.map(ta);if(typeof a=="function")return Y.value.map(s=>{const i=a(s);return W(i)===!0?{...i,value:s}:{value:s,label:i}});const l=({value:s})=>s>=e.min&&s<=e.max;return Array.isArray(a)===!0?a.map(s=>W(s)===!0?s:{value:s}).filter(l):Object.keys(a).map(s=>{const i=a[s],f=Number(s);return W(i)===!0?{...i,value:f}:{value:f,label:i}}).filter(l)}function ee(a){return{[F.value]:`${100*(a-e.min)/R.value}%`}}const Me=t(()=>{if(e.markerLabels===!1)return null;const a={};return A.value.forEach(l=>{a[l.value]=l}),a});function $e(){if(x["marker-label-group"]!==void 0)return x["marker-label-group"](Z.value);const a=x["marker-label"]||la;return A.value.map(l=>a({marker:l,...Z.value}))}const we=t(()=>[[ze,_e,void 0,{[O.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function _e(a){a.isFinal===!0?(M.value!==void 0&&(n(a.evt),a.touch===!0&&r(!0),M.value=void 0,y("pan","end")),C.value=!1,h.value=!1):a.isFirst===!0?(M.value=c(a.evt),n(a.evt),r(),C.value=!0,y("pan","start")):(n(a.evt),r())}function ae(){h.value=!1}function qe(a){n(a,c(a)),r(),S.value=!0,C.value=!0,document.addEventListener("mouseup",Q,!0)}function Q(){S.value=!1,C.value=!1,r(!0),ae(),document.removeEventListener("mouseup",Q,!0)}function Be(a){n(a,c(a)),r(!0)}function Le(a){ne.includes(a.keyCode)&&r(!0)}function Te(a){if(e.vertical===!0)return null;const l=m.lang.rtl!==e.reverse?1-a:a;return{transform:`translateX(calc(${2*l-1} * ${e.thumbSize} / 2 + ${50-100*l}%))`}}function Ve(a){const l=t(()=>S.value===!1&&(h.value===a.focusValue||h.value==="both")?" q-slider--focus":""),s=t(()=>`q-slider__thumb q-slider__thumb${g.value} q-slider__thumb${g.value}-${u.value===!0?"rtl":"ltr"} absolute non-selectable`+l.value+(a.thumbColor.value!==void 0?` text-${a.thumbColor.value}`:"")),i=t(()=>({width:e.thumbSize,height:e.thumbSize,[F.value]:`${100*a.ratio.value}%`,zIndex:h.value===a.focusValue?2:void 0})),f=t(()=>a.labelColor.value!==void 0?` text-${a.labelColor.value}`:""),_=t(()=>Te(a.ratio.value)),E=t(()=>"q-slider__text"+(a.labelTextColor.value!==void 0?` text-${a.labelTextColor.value}`:""));return()=>{const U=[p("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[p("path",{d:e.thumbPath})]),p("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(U.push(p("div",{class:me.value+" absolute fit no-pointer-events"+f.value},[p("div",{class:fe.value,style:{minWidth:e.thumbSize}},[p("div",{class:be.value,style:_.value},[p("span",{class:E.value},a.label.value)])])])),e.name!==void 0&&e.disable!==!0&&T(U,"push")),p("div",{class:s.value,style:i.value,...a.getNodeData()},U)}}function Re(a,l,s,i){const f=[];e.innerTrackColor!=="transparent"&&f.push(p("div",{key:"inner",class:he.value,style:G.value})),e.selectionColor!=="transparent"&&f.push(p("div",{key:"selection",class:ce.value,style:a.value})),e.markers!==!1&&f.push(p("div",{key:"marker",class:ve.value,style:ye.value})),i(f);const _=[ea("div",{key:"trackC",class:de.value,tabindex:l.value,...s.value},[p("div",{class:ke.value,style:ge.value},f)],"slide",d.value,()=>we.value)];if(e.markerLabels!==!1){const E=e.switchMarkerLabelsSide===!0?"unshift":"push";_[E](p("div",{key:"markerL",class:pe.value},$e()))}return _}return Ee(()=>{document.removeEventListener("mouseup",Q,!0)}),{state:{active:C,focus:h,preventFocus:S,dragging:M,editable:d,classes:ie,tabindex:oe,attributes:ue,roundValueFn:w,keyStep:q,trackLen:R,innerMin:v,innerMinRatio:N,innerMax:$,innerMaxRatio:P,positionProp:F,sizeProp:K,isReversed:u},methods:{onActivate:qe,onMobileClick:Be,onBlur:ae,onKeyup:Le,getContent:Re,getThumbRenderFn:Ve,convertRatioToModel:Ce,convertModelToRatio:z,getDraggingRatio:xe}}}const sa=()=>({}),ua=je({name:"QSlider",props:{...ra,modelValue:{required:!0,default:null,validator:r=>typeof r=="number"||r===null},labelValue:[String,Number]},emits:na,setup(r,{emit:n}){const{proxy:{$q:c}}=re(),{state:o,methods:e}=oa({updateValue:g,updatePosition:u,getDragging:b,formAttrs:Pe(r)}),y=k(null),x=k(0),m=k(0);function B(){m.value=r.modelValue===null?o.innerMin.value:L(r.modelValue,o.innerMin.value,o.innerMax.value)}Ke(()=>`${r.modelValue}|${o.innerMin.value}|${o.innerMax.value}`,B),B();const T=t(()=>e.convertModelToRatio(m.value)),C=t(()=>o.active.value===!0?x.value:T.value),S=t(()=>{const d={[o.positionProp.value]:`${100*o.innerMinRatio.value}%`,[o.sizeProp.value]:`${100*(C.value-o.innerMinRatio.value)}%`};return r.selectionImg!==void 0&&(d.backgroundImage=`url(${r.selectionImg}) !important`),d}),h=e.getThumbRenderFn({focusValue:!0,getNodeData:sa,ratio:C,label:t(()=>r.labelValue!==void 0?r.labelValue:m.value),thumbColor:t(()=>r.thumbColor||r.color),labelColor:t(()=>r.labelColor),labelTextColor:t(()=>r.labelTextColor)}),M=t(()=>o.editable.value!==!0?{}:c.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:v,onBlur:e.onBlur,onKeydown:$,onKeyup:e.onKeyup});function g(d){m.value!==r.modelValue&&n("update:modelValue",m.value),d===!0&&n("change",m.value)}function b(){return y.value.getBoundingClientRect()}function u(d,w=o.dragging.value){const q=e.getDraggingRatio(d,w);m.value=e.convertRatioToModel(q),x.value=r.snap!==!0||r.step===0?q:e.convertModelToRatio(m.value)}function v(){o.focus.value=!0}function $(d){if(ne.includes(d.keyCode)===!1)return;Oe(d);const w=([34,33].includes(d.keyCode)?10:1)*o.keyStep.value,q=([34,37,40].includes(d.keyCode)?-1:1)*(o.isReversed.value===!0?-1:1)*(r.vertical===!0?-1:1)*w;m.value=L(o.roundValueFn.value(m.value+q),o.innerMin.value,o.innerMax.value),g()}return()=>{const d=e.getContent(S,o.tabindex,M,w=>{w.push(h())});return p("div",{ref:y,class:o.classes.value+(r.modelValue===null?" q-slider--no-value":""),...o.attributes.value,"aria-valuenow":r.modelValue},d)}}}),ia={class:"row q-gutter-md items-center q-mb-md"},ca={class:"canvas-container"},va={class:"row q-gutter-md items-center q-mt-md"},da=Xe({__name:"DrawingBoard",setup(r){const n=k(null),c=k(null),o=k(!1),e=k("black"),y=k(3),x=k(!1),m=k(0),B=k(0),T=[{label:"Noir",value:"black"},{label:"Rouge",value:"red"},{label:"Vert",value:"green"},{label:"Bleu",value:"blue"},{label:"Orange",value:"orange"}];function C(b){if(!c.value||!n.value)return;const u=b.offsetX*n.value.width/n.value.clientWidth,v=b.offsetY*n.value.height/n.value.clientHeight;m.value=u,B.value=v,o.value=!0,c.value.beginPath(),c.value.moveTo(u,v)}function S(b){if(!o.value||!c.value||!n.value)return;const u=b.offsetX*n.value.width/n.value.clientWidth,v=b.offsetY*n.value.height/n.value.clientHeight;c.value.lineWidth=y.value,c.value.strokeStyle=x.value?"white":e.value,c.value.lineCap="round",c.value.lineTo(u,v),c.value.stroke()}function h(){c.value&&(o.value=!1,c.value.closePath())}function M(){c.value&&n.value&&c.value.clearRect(0,0,n.value.width,n.value.height)}function g(){if(!n.value)return;const b=n.value.toDataURL("image/png"),u=document.createElement("a");u.href=b,u.download="dessin.png",u.click()}return Ge(()=>{if(n.value){n.value.width=n.value.offsetWidth*2,n.value.height=n.value.offsetHeight*2;const b=n.value.getContext("2d");b&&(c.value=b)}}),(b,u)=>(Je(),He(aa,{class:"q-pa-md"},{default:Ye(()=>[I("div",ia,[V(te,{label:"Effacer",color:"negative",onClick:M}),V(te,{label:"Exporter en PNG",color:"primary",onClick:g})]),I("div",ca,[I("canvas",{ref_key:"canvas",ref:n,class:"drawing-canvas",onMousedown:C,onMousemove:S,onMouseup:h,onMouseleave:h},null,544)]),I("div",va,[V(Ne,{modelValue:x.value,"onUpdate:modelValue":u[0]||(u[0]=v=>x.value=v),label:"Gomme"},null,8,["modelValue"]),V(Fe,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=v=>e.value=v),options:T,label:"Couleur",dense:"",outlined:"","emit-value":"","map-options":"",class:"col"},null,8,["modelValue"]),V(ua,{modelValue:y.value,"onUpdate:modelValue":u[2]||(u[2]=v=>y.value=v),min:1,max:20,"label-always":!0,class:"col"},null,8,["modelValue"])])]),_:1}))}}),$a=Ze(da,[["__scopeId","data-v-cbbbbf9f"]]);export{$a as default};
