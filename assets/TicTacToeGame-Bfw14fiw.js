import{Q as q}from"./QBtn-CVP2G80N.js";import{Q as X}from"./QPage-BL-E_7of.js";import{x as C,r as d,e as O,B,C as N,y as m,D as f,G as t,M as w,F as D,E as x,H as r,L as u,N as G,O as S,_ as M}from"./index-m_G7EGje.js";import"./render-CmTqwg_I.js";const Q={class:"col-12 col-md-8 column items-center"},V={class:"q-gutter-sm q-mb-md"},A={class:"tictactoe-grid"},I=["onClick"],h={key:0,class:"q-mt-md text-h6 text-positive"},E={class:"col-12 col-md-4 q-mt-md"},F={class:"score-box q-pa-sm q-mb-sm"},L={class:"score-line"},P={class:"score-line"},R={class:"score-line"},$=C({__name:"TicTacToeGame",setup(H){const s=d(Array(9).fill(null)),c=d("X"),l=d(null),a=d({X:0,O:0,draw:0}),n=d(null);function b(o){s.value[o]!==null||l.value||(s.value[o]=c.value,y(),l.value||(c.value=c.value==="X"?"O":"X"))}function y(){const o=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[e,p,v]of o){const i=s.value[e];if(i&&i===s.value[p]&&i===s.value[v]){l.value=i,a.value[i]++,_();return}}s.value.every(e=>e!==null)&&(l.value="Draw",a.value.draw++,_())}function g(){s.value=Array(9).fill(null),c.value="X",l.value=null}async function k(){a.value={X:0,O:0,draw:0},n.value&&(await m.from("scores_tictactoe").delete().eq("user_id",n.value),_())}async function T(){const{data:o}=await m.auth.getUser();if(!o?.user?.id)return;n.value=o.user.id;const{data:e}=await m.from("scores_tictactoe").select("*").eq("user_id",n.value).order("created_at",{ascending:!1}).limit(1);e?.[0]&&(a.value={X:e[0].x,O:e[0].o,draw:e[0].draw})}async function _(){n.value&&await m.from("scores_tictactoe").insert([{user_id:n.value,x:a.value.X,o:a.value.O,draw:a.value.draw}])}return O(()=>{T()}),(o,e)=>(f(),B(X,{class:"q-pa-md row q-col-gutter-xl"},{default:N(()=>[t("div",Q,[e[1]||(e[1]=t("div",{class:"text-h5 q-mb-md"},"‚ùå‚≠ï Tic Tac Toe",-1)),t("div",V,[e[0]||(e[0]=r(" Au tour de : ")),t("strong",null,u(c.value),1)]),t("div",A,[(f(!0),w(S,null,G(s.value,(p,v)=>(f(),w("div",{key:v,class:"cell",onClick:i=>b(v)},u(p),9,I))),128))]),l.value?(f(),w("div",h,u(l.value==="Draw"?"Match nul !":`Gagnant : ${l.value}`),1)):D("",!0),x(q,{label:"Recommencer",color:"primary",class:"q-mt-md",onClick:g})]),t("div",E,[e[8]||(e[8]=t("div",{class:"text-h6 q-mb-sm text-center"},"üèÜ Score",-1)),t("div",F,[t("div",L,[e[2]||(e[2]=r("‚ùå ")),e[3]||(e[3]=t("span",null,"X",-1)),r(" : "+u(a.value.X),1)]),t("div",P,[e[4]||(e[4]=r("‚≠ï ")),e[5]||(e[5]=t("span",null,"O",-1)),r(" : "+u(a.value.O),1)]),t("div",R,[e[6]||(e[6]=r("ü§ù ")),e[7]||(e[7]=t("span",null,"Nul",-1)),r(" : "+u(a.value.draw),1)])]),x(q,{label:"R√©initialiser le score",color:"negative",class:"full-width",onClick:k,flat:""})])]),_:1}))}}),J=M($,[["__scopeId","data-v-1775dc17"]]);export{J as default};
