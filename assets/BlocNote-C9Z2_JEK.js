import{Q as c}from"./QBtn-B5HOvfy_.js";import{Q as v}from"./QInput-7YtwZLaz.js";import{Q as w}from"./QPage-DiLNYGvv.js";import{x as g,z as q,r as i,e as B,B as C,C as k,y as r,D as x,E as s,A as y,_ as N}from"./index-mX4mPh-6.js";import"./render-BPtvFS0_.js";import"./use-key-composition-hvQkky4D.js";import"./use-dark-DzcR0PhV.js";import"./focus-manager-BJWzFvJg.js";const Q=g({__name:"BlocNote",setup(b){const u=q(),l=y(),n=u.params.id,o=i(""),d=i("");function m(){l.push("/listnote")}async function p(){const{data:{user:e}}=await r.auth.getUser();if(!e)return;const{data:t,error:a}=await r.from("notes").select("*").eq("id",n).eq("user_id",e.id).single();if(a){console.error(a);return}o.value=t.content||"",d.value=t.title||""}async function f(){const{error:e}=await r.from("notes").update({content:o.value}).eq("id",n);e&&console.error("Erreur sauvegarde note :",e)}async function _(){await r.from("notes").delete().eq("id",n),await l.push("/listnote")}return B(()=>{p()}),(e,t)=>(x(),C(w,{class:"q-pa-md"},{default:k(()=>[s(c,{flat:"",dense:"",icon:"arrow_back",label:"Retour",onClick:m,class:"q-mb-md"}),s(v,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value=a),filled:"",type:"textarea",autogrow:"",placeholder:"Commence à écrire ta note...",onKeyup:f},null,8,["modelValue"]),s(c,{color:"negative",label:"Supprimer la note",flat:"",class:"q-mt-md",onClick:_})]),_:1}))}}),D=N(Q,[["__scopeId","data-v-a67dd135"]]);export{D as default};
