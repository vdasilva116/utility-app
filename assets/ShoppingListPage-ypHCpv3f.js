import{Q as N}from"./QInput-Cf17zoy7.js";import{Q as B}from"./QCheckbox-Cv5G7E9f.js";import{Q as s}from"./QBtn-DKLCg6f7.js";import{Q as b,a as v}from"./QItem-DyI16qkB.js";import{Q as w}from"./QList-tFsmyv5N.js";import{Q as A}from"./QPage-Cyj_wye0.js";import{t as E,r as _,w as P,a as j,u as k,v as r,x as i,G as C,F as g,O as h,y as a,N as O,I as Q,J as V,B as L,H as y,_ as T}from"./index-De15wrRx.js";import"./use-key-composition-Cf6ffK-U.js";import"./dom-CWUWeCtZ.js";import"./render-0Abd-KGh.js";import"./use-dark-BnlytlHe.js";const J={class:"q-mb-md row items-end q-gutter-sm"},U={key:0,class:"q-mb-lg"},F={key:1},K=E({__name:"ShoppingListPage",setup(z){const n=_(JSON.parse(localStorage.getItem("shoppingItems")||"[]"));P(n,t=>{localStorage.setItem("shoppingItems",JSON.stringify(t))},{deep:!0});const c=_(""),u=_(!1),d=j(()=>{const t=[],o=[];for(const e of n.value)e.promo?t.push(e):o.push(e);return{promo:t,regular:o}});function f(t){return t.charAt(0).toUpperCase()+t.slice(1)}function x(){const t=c.value.trim();if(!t)return;const o=n.value.find(e=>e.name.toLowerCase()===t.toLowerCase()&&e.promo===u.value);if(o)o.quantity++;else{const e={name:t,promo:u.value,quantity:1};n.value=u.value?[e,...n.value]:[...n.value,e]}c.value="",u.value=!1}function I(t){t.quantity++}function q(t){if(t.quantity>1)t.quantity--;else{const o=n.value.indexOf(t);o!==-1&&n.value.splice(o,1)}}function S(){n.value=[]}function $(){const t=n.value.filter(l=>l.promo),o=n.value.filter(l=>!l.promo),e=t.map(l=>`- ${f(l.name)} * ${l.quantity}`).join(`
`),m=o.map(l=>`- ${f(l.name)} * ${l.quantity}`).join(`
`),p=(e?`ðŸŸ¢ En promo
`+e+`

`:"")+(m?`ðŸ”¸ Autres produits
`+m:"");navigator.clipboard.writeText(p).then(()=>{alert("Liste copiÃ©e dans le presse-papiers !")},()=>{alert("Erreur lors de la copie de la liste.")})}return(t,o)=>(i(),k(A,{class:"q-pa-md"},{default:r(()=>[C("div",J,[a(N,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),label:"Ajouter un produit",onKeyup:O(x,["enter"]),outlined:"",class:"col",dense:""},null,8,["modelValue"]),a(B,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),label:"Promo"},null,8,["modelValue"]),a(s,{label:"Ajouter",onClick:x,color:"primary"}),a(s,{label:"Vider la liste",onClick:S,color:"negative",flat:""}),a(s,{label:"Copier la liste",onClick:$,color:"secondary",flat:""})]),d.value.promo.length?(i(),g("div",U,[o[2]||(o[2]=C("div",{class:"text-h6 q-mb-sm"},"ðŸŸ¢ En promo",-1)),a(w,{bordered:"",separator:""},{default:r(()=>[(i(!0),g(Q,null,V(d.value.promo,(e,m)=>(i(),k(b,{key:"promo-"+m},{default:r(()=>[a(v,null,{default:r(()=>[L(y(f(e.name))+" x"+y(e.quantity),1)]),_:2},1024),a(v,{side:"",class:"row no-wrap items-center"},{default:r(()=>[a(s,{dense:"",flat:"",icon:"remove",onClick:p=>q(e)},null,8,["onClick"]),a(s,{dense:"",flat:"",icon:"add",onClick:p=>I(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):h("",!0),d.value.regular.length?(i(),g("div",F,[o[3]||(o[3]=C("div",{class:"text-h6 q-mb-sm"},"ðŸ”¸ Autres produits",-1)),a(w,{bordered:"",separator:""},{default:r(()=>[(i(!0),g(Q,null,V(d.value.regular,(e,m)=>(i(),k(b,{key:"npromo-"+m},{default:r(()=>[a(v,null,{default:r(()=>[L(y(f(e.name))+" x"+y(e.quantity),1)]),_:2},1024),a(v,{side:"",class:"row no-wrap items-center"},{default:r(()=>[a(s,{dense:"",flat:"",icon:"remove",onClick:p=>q(e)},null,8,["onClick"]),a(s,{dense:"",flat:"",icon:"add",onClick:p=>I(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):h("",!0)]),_:1}))}}),oe=T(K,[["__scopeId","data-v-5b213fa7"]]);export{oe as default};
