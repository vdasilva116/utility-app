import{a as c}from"./QBtn-DW49BdE9.js";import{Q as v}from"./QInput-B7YCRa1i.js";import{Q as w}from"./QPage-4aB-4sV1.js";import{t as g,v as q,r as i,o as B,y as k,z as x,u as r,A as y,B as s,x as C,_ as N}from"./index-BwSv7cGb.js";import"./render-DxpCd_na.js";import"./use-key-composition-D-iEXPE9.js";import"./use-dark-CUTMrp-q.js";import"./focus-manager-BJWzFvJg.js";const b=g({__name:"BlocNote",setup(h){const u=q(),l=C(),n=u.params.id,o=i(""),d=i("");function m(){l.push("/listnote")}async function p(){const{data:{user:e}}=await r.auth.getUser();if(!e)return;const{data:t,error:a}=await r.from("notes").select("*").eq("id",n).eq("user_id",e.id).single();if(a){console.error(a);return}o.value=t.content||"",d.value=t.title||""}async function f(){const{error:e}=await r.from("notes").update({content:o.value}).eq("id",n);e&&console.error("Erreur sauvegarde note :",e)}async function _(){await r.from("notes").delete().eq("id",n),await l.push("/listnote")}return B(()=>{p()}),(e,t)=>(y(),k(w,{class:"q-pa-md"},{default:x(()=>[s(c,{flat:"",dense:"",icon:"arrow_back",label:"Retour",onClick:m,class:"q-mb-md"}),s(v,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value=a),filled:"",type:"textarea",autogrow:"",placeholder:"Commence à écrire ta note...",onKeyup:f},null,8,["modelValue"]),s(c,{color:"negative",label:"Supprimer la note",flat:"",class:"q-mt-md",onClick:_})]),_:1}))}}),K=N(b,[["__scopeId","data-v-a67dd135"]]);export{K as default};
